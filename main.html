<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Graph Example</title>
    <script
      src="https://code.jquery.com/jquery-2.1.4.min.js"
      integrity="sha256-8WqyJLuWKRBVhxXIL1jBDD7SDxU936oZkCnxQbWwJVw="
      crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  </head>
  <body>
    <div class="container">
      <h3>Redis Graph Console</h3>
    </div>
    <div class="row container">
        <div class="input-field col s2" >
          <select id="initparam1">
            <option value="1">MATCH</option>
            <option value="3">RETURN</option>
          </select>
        </div>
        <div class="input-field col s3" id="postparam1">
          <select id="test12">
            <option value="1">All</option>
            <option value="1">programmer</option>
            <option value="2">skill</option>
            <option value="2">knows</option>
          </select>
        </div>
        <div class="input-field col s2">
          <select id="select13">
            <option value="" disabled selected></option>
            <option value="1">WHERE</option>
          </select>
        </div>
        <div class="input-field col s2 14">
          <input type="text" id="autocomplete-input" class="autocomplete">
          <label for="autocomplete-input">Filter</label>
        </div>
        <div class="input-field col s2 14">
          <input id="email" type="text" class="validate">
          <label for="email">Name</label>
        </div>

        <i class="small material-icons" id="line1add" style="padding:25px;cursor:pointer">add_circle_outline</i>
    </div>


    <div class="row container" id="line2">
        <div class="input-field col s2" id="initparam2">
          <select>
            <option value="1">MATCH</option>
            <option value="3">RETURN</option>
          </select>
        </div>
        <div class="input-field col s3" id="postparam2">
          <select>
            <option value="1">All</option>
            <option value="1">Programmer</option>
            <option value="2">Skill</option>
            <option value="2">Knows</option>
          </select>
        </div>
        <div class="input-field col s2">
          <select id="select23">
            <option value="" disabled selected></option>
            <option value="1">WHERE</option>
          </select>
        </div>
        <div class="input-field col s2 24">
          <input type="text" id="autocomplete-input" class="autocomplete">
          <label for="autocomplete-input">Filter</label>
        </div>
        <div class="input-field col s2 24">
          <input id="email" type="text" class="validate">
          <label for="email">Name</label>
        </div>

        <i class="small material-icons" id="line2add" style="padding:25px;cursor:pointer">add_circle_outline</i>
    </div>
    <div class="row container" id="line3">
        <div class="input-field col s2" id="initparam3">
          <select>
            <option value="1">MATCH</option>
            <option value="3">RETURN</option>
          </select>
        </div>
        <div class="input-field col s3" id="postparam3">
          <select>
            <option value="1">ALL</option>
            <option value="1">Programmer</option>
            <option value="2">Skill</option>
            <option value="2">Knows</option>
          </select>
        </div>
        <div class="input-field col s2">
          <select id="select33">
            <option value="" disabled selected></option>
            <option value="1">WHERE</option>
          </select>
        </div>
        <div class="input-field col s2 34">
          <input type="text" id="autocomplete-input" class="autocomplete">
          <label for="autocomplete-input">Filter</label>
        </div>
        <div class="input-field col s2 34">
          <input id="email" type="text" class="validate">
          <label for="email">Name</label>
        </div>

    </div>
    <div class="row container center" id="execute">
      <a class="waves-effect waves-light btn-large"><i class="material-icons right">send</i>Execute</a>
      <p id="output"></p>
    <div>
  </body>
  <script>
    $(document).ready(function(){
      $('select').formSelect();
      var line2 = $('#line2');
      line2.hide()

      $('.14').hide();
      $('.24').hide();
      $('.34').hide();

      $('#line1add').click(function(){
        if($(this).text() == 'add_circle_outline'){
          this.innerHTML = 'remove_circle_outline';
          line2.toggle();
        }
        else{
          this.innerHTML = 'add_circle_outline';
          line2.toggle();
        }
      });

      var line3 = $('#line3');
      line3.hide()
      $('#line2add').click(function(){
        if($(this).text() == 'add_circle_outline'){
          this.innerHTML = 'remove_circle_outline';
          line3.toggle();
        }
        else{
          this.innerHTML = 'add_circle_outline';
          line3.toggle();
        }
      });

      $('#select13').on('change', function() {
        $('.14').show();
      });

      $('#select23').on('change', function() {
        $('.24').show();
      });

      $('#select33').on('change', function() {
        $('.34').show();
      });

      $

      $('input.autocomplete').autocomplete({
        data: {
          "=": null,
          "<": null,
          "<=": null,
          ">": null,
          ">=": null,
          "CONTAINS": null,
          "ENDS WITH": null,
          "IN": null,
          "STARTS WITH": null,
        },
      });
    });

    $("#execute").click(function(){
      console.log("clicked");
      var query = "";
      query+=$('#initparam1 option:selected').text()+" ";
      if (query == "MATCH " && $('#postparam1 option:selected').text() == "All"){
          query = 'ERROR'
      }
      else if (query == "RETURN " && $('#postparam1 option:selected').text() == "All"){
          query = 'MATCH (p:programmer)-[k:knows]->(s:skill) RETURN (p.name)-[k.weight]->(s.name) LIMIT 50';
      }
      else{
        if($('#postparam1 option:selected').text() == 'knows'){
          query+= '[p:knows]';
        }
        else{
          query+= '(p:'+$('#postparam1 option:selected').text()+')';
        }
      }

      $("#output").text(query);
    });

  </script>

</html>
